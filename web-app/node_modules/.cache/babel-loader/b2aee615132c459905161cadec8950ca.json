{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\baszak\\\\pwr\\\\inz\\\\repo\\\\inzynierka\\\\web-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(loadUser),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(addUserFunction),\n    _marked3 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(modifyUserFunction),\n    _marked4 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(modifyUserPasswordFunction),\n    _marked5 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(watchGetUser),\n    _marked6 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(watchAddUser),\n    _marked7 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(watchModifyUser),\n    _marked8 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(watchModifyUserPassword),\n    _marked9 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(userSaga);\n\nimport { put, takeLatest } from 'redux-saga/effects';\nimport { SERWER_LOCAL } from \"../constants/AppConstants\";\n\nvar getUserParams = function getUserParams(login, pass) {\n  try {\n    console.log('fetching with get user');\n    var response = fetch(\"\".concat(SERWER_LOCAL, \"/api/user/login\"), {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        userId: 0,\n        name: '',\n        surname: '',\n        login: login,\n        password: pass,\n        mail: '',\n        admin: false\n      })\n    }).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      console.log(data);\n\n      if (data.status === 'ok') {\n        console.log(data.data);\n        return data.data;\n      } else {\n        console.log('not good');\n        return false;\n      }\n    }).catch(function (error) {\n      return console.log(\"Error occurred: \".concat(error, \".\"));\n    });\n    return response;\n  } catch (e) {\n    console.log(\"Could not fetch data from \".concat(SERWER_LOCAL, \".\"));\n    return {};\n  }\n};\n\nvar addUser = function addUser(user) {\n  try {\n    console.log('fetching with get user');\n    var response = fetch(\"\".concat(SERWER_LOCAL, \"/api/user/add\"), {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        userId: 0,\n        name: user.name,\n        surname: user.surname,\n        login: user.login,\n        password: user.password,\n        mail: user.mail,\n        admin: false\n      })\n    }).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      if (data.status === 'ok') {\n        console.log(data.data);\n        return data.data;\n      } else {\n        console.log('not good');\n        return false;\n      }\n    }).catch(function (error) {\n      return console.log(\"Error occurred: \".concat(error, \".\"));\n    });\n    return response;\n  } catch (e) {\n    console.log(\"Could not fetch data from \".concat(SERWER_LOCAL, \".\"));\n    return true;\n  }\n};\n\nvar modifyUser = function modifyUser(user) {\n  try {\n    console.log('fetching with get user');\n    var response = fetch(\"\".concat(SERWER_LOCAL, \"/api/user/modify\"), {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        userId: user.userId,\n        name: user.name,\n        surname: user.surname,\n        login: user.login,\n        password: user.password,\n        mail: user.mail,\n        admin: false\n      })\n    }).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      if (data.status === 'ok') {\n        console.log(data.data);\n        return data.data;\n      } else {\n        console.log('not good');\n        return false;\n      }\n    }).catch(function (error) {\n      return console.log(\"Error occurred: \".concat(error, \".\"));\n    });\n    return response;\n  } catch (e) {\n    console.log(\"Could not fetch data from \".concat(SERWER_LOCAL, \".\"));\n    return true;\n  }\n};\n\nvar modifyPassword = function modifyPassword(user) {\n  try {\n    console.log('fetching with get user');\n    var response = fetch(\"\".concat(SERWER_LOCAL, \"/api/user/modifypass\"), {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        userId: user.userId,\n        name: user.name,\n        surname: user.surname,\n        login: user.login,\n        password: user.password,\n        mail: user.mail,\n        admin: false\n      })\n    }).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      if (data.status === 'ok') {\n        console.log(data.data);\n        return data.data;\n      } else {\n        console.log('not good');\n        return false;\n      }\n    }).catch(function (error) {\n      return console.log(\"Error occurred: \".concat(error, \".\"));\n    });\n    return response;\n  } catch (e) {\n    console.log(\"Could not fetch data from \".concat(SERWER_LOCAL, \".\"));\n    return true;\n  }\n};\n\nfunction loadUser(action) {\n  var userParams;\n  return _regeneratorRuntime.wrap(function loadUser$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return getUserParams(action.login, action.pass);\n\n        case 3:\n          userParams = _context.sent;\n\n          if (!(userParams == false)) {\n            _context.next = 9;\n            break;\n          }\n\n          _context.next = 7;\n          return put({\n            type: 'GET_USER_WRONG'\n          });\n\n        case 7:\n          _context.next = 11;\n          break;\n\n        case 9:\n          _context.next = 11;\n          return put({\n            type: 'GET_USER_SUCCESS',\n            payload: userParams\n          });\n\n        case 11:\n          _context.next = 17;\n          break;\n\n        case 13:\n          _context.prev = 13;\n          _context.t0 = _context[\"catch\"](0);\n          _context.next = 17;\n          return put({\n            type: 'GET_USER_FAILURE',\n            payload: _context.t0\n          });\n\n        case 17:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, this, [[0, 13]]);\n}\n\nfunction addUserFunction(action) {\n  return _regeneratorRuntime.wrap(function addUserFunction$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return addUser(action.user);\n\n        case 3:\n          _context2.next = 5;\n          return put({\n            type: 'ADD_USER_SUCCESS'\n          });\n\n        case 5:\n          _context2.next = 11;\n          break;\n\n        case 7:\n          _context2.prev = 7;\n          _context2.t0 = _context2[\"catch\"](0);\n          _context2.next = 11;\n          return put({\n            type: 'ADD_USER_FAILURE',\n            payload: _context2.t0\n          });\n\n        case 11:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, this, [[0, 7]]);\n}\n\nfunction modifyUserFunction(action) {\n  return _regeneratorRuntime.wrap(function modifyUserFunction$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _context3.next = 3;\n          return modifyUser(action.user);\n\n        case 3:\n          _context3.next = 5;\n          return put({\n            type: 'ADD_USER_SUCCESS'\n          });\n\n        case 5:\n          _context3.next = 11;\n          break;\n\n        case 7:\n          _context3.prev = 7;\n          _context3.t0 = _context3[\"catch\"](0);\n          _context3.next = 11;\n          return put({\n            type: 'ADD_USER_FAILURE',\n            payload: _context3.t0\n          });\n\n        case 11:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, this, [[0, 7]]);\n}\n\nfunction modifyUserPasswordFunction(action) {\n  return _regeneratorRuntime.wrap(function modifyUserPasswordFunction$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          _context4.next = 3;\n          return modifyPassword(action.user);\n\n        case 3:\n          _context4.next = 5;\n          return put({\n            type: 'MODIFY_USER_PASSWORD_SUCCESS'\n          });\n\n        case 5:\n          _context4.next = 11;\n          break;\n\n        case 7:\n          _context4.prev = 7;\n          _context4.t0 = _context4[\"catch\"](0);\n          _context4.next = 11;\n          return put({\n            type: 'MODIFY_USER_PASSWORD_FAILURE',\n            payload: _context4.t0\n          });\n\n        case 11:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, this, [[0, 7]]);\n}\n\nfunction watchGetUser() {\n  return _regeneratorRuntime.wrap(function watchGetUser$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return takeLatest('GET_USER', loadUser);\n\n        case 2:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5, this);\n}\n\nfunction watchAddUser() {\n  return _regeneratorRuntime.wrap(function watchAddUser$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return takeLatest('ADD_USER', addUserFunction);\n\n        case 2:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6, this);\n}\n\nfunction watchModifyUser() {\n  return _regeneratorRuntime.wrap(function watchModifyUser$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return takeLatest('MODIFY_USER', modifyUserFunction);\n\n        case 2:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _marked7, this);\n}\n\nfunction watchModifyUserPassword() {\n  return _regeneratorRuntime.wrap(function watchModifyUserPassword$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.next = 2;\n          return takeLatest('MODIFY_USER_PASSWORD', modifyUserFunction);\n\n        case 2:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, _marked8, this);\n}\n\nexport default function userSaga() {\n  return _regeneratorRuntime.wrap(function userSaga$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          _context9.next = 2;\n          return [watchGetUser(), watchAddUser(), watchModifyUser(), watchModifyUserPassword()];\n\n        case 2:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  }, _marked9, this);\n}","map":{"version":3,"sources":["C:\\Users\\baszak\\pwr\\inz\\repo\\inzynierka\\web-app\\src\\sagas\\userSaga.js"],"names":["loadUser","addUserFunction","modifyUserFunction","modifyUserPasswordFunction","watchGetUser","watchAddUser","watchModifyUser","watchModifyUserPassword","userSaga","put","takeLatest","SERWER_LOCAL","getUserParams","login","pass","console","log","response","fetch","method","headers","body","JSON","stringify","userId","name","surname","password","mail","admin","then","json","data","status","catch","error","e","addUser","user","modifyUser","modifyPassword","action","userParams","type","payload"],"mappings":"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","sourcesContent":["import {\r\n    put,\r\n    takeLatest\r\n} from 'redux-saga/effects';\r\nimport {SERWER_LOCAL} from \"../constants/AppConstants\";\r\n\r\nconst getUserParams = (login, pass) => {\r\n    try {\r\n        console.log('fetching with get user');\r\n        const response = fetch(`${SERWER_LOCAL}/api/user/login`,{\r\n            method: 'POST',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                userId: 0,\r\n                name: '',\r\n                surname: '',\r\n                login: login,\r\n                password: pass,\r\n                mail: '',\r\n                admin: false\r\n            })\r\n        }).then(response => response.json())\r\n            .then(data => {\r\n                console.log(data);\r\n                if(data.status === 'ok') {\r\n                    console.log(data.data);\r\n                    return data.data;\r\n                } else {\r\n                    console.log('not good');\r\n                    return false;\r\n                }\r\n            })\r\n            .catch(error => console.log(`Error occurred: ${error}.`));\r\n        return response;\r\n    } catch(e) {\r\n        console.log(`Could not fetch data from ${SERWER_LOCAL}.`);\r\n        return {};\r\n    }\r\n};\r\n\r\nconst addUser = (user) => {\r\n    try {\r\n        console.log('fetching with get user');\r\n        const response = fetch(`${SERWER_LOCAL}/api/user/add`,{\r\n            method: 'POST',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                userId: 0,\r\n                name: user.name,\r\n                surname: user.surname,\r\n                login: user.login,\r\n                password: user.password,\r\n                mail: user.mail,\r\n                admin: false\r\n            })\r\n        }).then(response => response.json())\r\n            .then(data => {\r\n                if(data.status === 'ok') {\r\n                    console.log(data.data);\r\n                    return data.data;\r\n                } else {\r\n                    console.log('not good');\r\n                    return false;\r\n                }\r\n            })\r\n            .catch(error => console.log(`Error occurred: ${error}.`));\r\n        return response;\r\n    } catch(e) {\r\n        console.log(`Could not fetch data from ${SERWER_LOCAL}.`);\r\n        return true;\r\n    }\r\n};\r\n\r\nconst modifyUser = (user) => {\r\n    try {\r\n        console.log('fetching with get user');\r\n        const response = fetch(`${SERWER_LOCAL}/api/user/modify`,{\r\n            method: 'POST',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                userId: user.userId,\r\n                name: user.name,\r\n                surname: user.surname,\r\n                login: user.login,\r\n                password: user.password,\r\n                mail: user.mail,\r\n                admin: false\r\n            })\r\n        }).then(response => response.json())\r\n            .then(data => {\r\n                if(data.status === 'ok') {\r\n                    console.log(data.data);\r\n                    return data.data;\r\n                } else {\r\n                    console.log('not good');\r\n                    return false;\r\n                }\r\n            })\r\n            .catch(error => console.log(`Error occurred: ${error}.`));\r\n        return response;\r\n    } catch(e) {\r\n        console.log(`Could not fetch data from ${SERWER_LOCAL}.`);\r\n        return true;\r\n    }\r\n};\r\n\r\nconst modifyPassword = (user) => {\r\n    try {\r\n        console.log('fetching with get user');\r\n        const response = fetch(`${SERWER_LOCAL}/api/user/modifypass`,{\r\n            method: 'POST',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                userId: user.userId,\r\n                name: user.name,\r\n                surname: user.surname,\r\n                login: user.login,\r\n                password: user.password,\r\n                mail: user.mail,\r\n                admin: false\r\n            })\r\n        }).then(response => response.json())\r\n            .then(data => {\r\n                if(data.status === 'ok') {\r\n                    console.log(data.data);\r\n                    return data.data;\r\n                } else {\r\n                    console.log('not good');\r\n                    return false;\r\n                }\r\n            })\r\n            .catch(error => console.log(`Error occurred: ${error}.`));\r\n        return response;\r\n    } catch(e) {\r\n        console.log(`Could not fetch data from ${SERWER_LOCAL}.`);\r\n        return true;\r\n    }\r\n};\r\n\r\nfunction* loadUser (action) {\r\n    try {\r\n        const userParams = yield getUserParams(action.login, action.pass);\r\n        if(userParams == false) {\r\n            yield put({ type: 'GET_USER_WRONG' });\r\n        } else {\r\n            yield put({ type: 'GET_USER_SUCCESS', payload: userParams});\r\n        }\r\n    } catch (e) {\r\n        yield put({type: 'GET_USER_FAILURE', payload: e});\r\n    }\r\n}\r\n\r\nfunction* addUserFunction(action) {\r\n    try {\r\n        yield addUser(action.user);\r\n        yield put({ type: 'ADD_USER_SUCCESS'});\r\n    } catch (e) {\r\n        yield put({ type: 'ADD_USER_FAILURE', payload: e});\r\n    }\r\n}\r\n\r\nfunction* modifyUserFunction(action) {\r\n    try {\r\n        yield modifyUser(action.user);\r\n        yield put({ type: 'ADD_USER_SUCCESS'});\r\n    } catch (e) {\r\n        yield put({ type: 'ADD_USER_FAILURE', payload: e});\r\n    }\r\n}\r\n\r\nfunction* modifyUserPasswordFunction(action) {\r\n    try {\r\n        yield modifyPassword(action.user);\r\n        yield put({ type: 'MODIFY_USER_PASSWORD_SUCCESS'});\r\n    } catch (e) {\r\n        yield put({ type: 'MODIFY_USER_PASSWORD_FAILURE', payload: e});\r\n    }\r\n}\r\n\r\nfunction* watchGetUser() {\r\n    yield takeLatest('GET_USER', loadUser);\r\n}\r\n\r\nfunction* watchAddUser() {\r\n    yield takeLatest('ADD_USER', addUserFunction);\r\n}\r\n\r\nfunction* watchModifyUser() {\r\n    yield takeLatest('MODIFY_USER', modifyUserFunction);\r\n}\r\n\r\nfunction* watchModifyUserPassword() {\r\n    yield takeLatest('MODIFY_USER_PASSWORD', modifyUserFunction);\r\n}\r\n\r\nexport default function* userSaga() {\r\n    yield [\r\n        watchGetUser(),\r\n        watchAddUser(),\r\n        watchModifyUser(),\r\n        watchModifyUserPassword()\r\n    ]\r\n}\r\n"]},"metadata":{},"sourceType":"module"}